<section class="home-testimonials">
  <div class="home-section-heading">
    {% if section.settings.subheading != blank %}
      <p class="home-section-eyebrow">{{ section.settings.subheading | escape }}</p>
    {% endif %}
    <h2>{{ section.settings.heading | escape }}</h2>
    {% if section.settings.body != blank %}
      <p class="home-section-body">{{ section.settings.body | escape }}</p>
    {% endif %}
  </div>

  <div class="home-testimonials__scroller" data-testimonials>
    {% for block in section.blocks %}
      <article class="home-testimonial" {{ block.shopify_attributes }}>
        <p class="home-testimonial__quote">“{{ block.settings.quote | escape }}”</p>
        <div class="home-testimonial__meta">
          <span class="home-testimonial__name">{{ block.settings.name | escape }}</span>
          {% if block.settings.detail != blank %}
            <span class="home-testimonial__detail">{{ block.settings.detail | escape }}</span>
          {% endif %}
        </div>
        {% if block.settings.rating > 0 %}
          <div class="home-testimonial__rating" aria-label="{{ block.settings.rating }} out of 5 stars">
            {% for i in (1..block.settings.rating) %}
              ★
            {% endfor %}
          </div>
        {% endif %}
      </article>
    {% endfor %}
  </div>
</section>

<style>
  .home-testimonials {
    padding: 3rem var(--page-margin);
    display: grid;
    gap: 2rem;
  }
  .home-testimonials__scroller {
    display: grid;
    gap: 1.5rem;
    grid-auto-flow: column;
    grid-auto-columns: minmax(250px, 1fr);
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    padding-bottom: 1rem;
  }
  .home-testimonials__scroller::-webkit-scrollbar {
    height: 6px;
  }
  .home-testimonial {
    background: #f6f6f6;
    border-radius: 1.5rem;
    padding: 1.75rem;
    display: grid;
    gap: 1rem;
    scroll-snap-align: start;
    min-height: 220px;
  }
  .home-testimonial__quote {
    font-size: 1.05rem;
    line-height: 1.6;
    color: rgba(17, 17, 17, 0.9);
  }
  .home-testimonial__meta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }
  .home-testimonial__name {
    font-weight: 600;
  }
  .home-testimonial__rating {
    color: #f2b200;
  }

  @media (min-width: 1024px) {
    .home-testimonials__scroller {
      grid-auto-flow: initial;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      overflow: visible;
    }
  }
</style>

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "Eyebrow text",
      "default": "Loved by 20k+ customers"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Real talk from our community"
    },
    {
      "type": "textarea",
      "id": "body",
      "label": "Supporting text",
      "default": "See why shoppers keep coming back for their next pair."
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "These jeans hug in all the right places and keep their shape all day."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "Aditi V."
        },
        {
          "type": "text",
          "id": "detail",
          "label": "Detail",
          "default": "Verified buyer"
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "min": 0,
          "max": 5,
          "step": 1,
          "default": 5
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        { "type": "testimonial" },
        { "type": "testimonial" },
        { "type": "testimonial" }
      ]
    }
  ]
}
{% endschema %}
