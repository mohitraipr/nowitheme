<section class="search-template">
  <div class="container">
    <h1 class="section-heading">{{ 'search.title' | t }}</h1>
    <form class="search-template__form" action="{{ routes.search_url }}" method="get" role="search">
      <label class="visually-hidden" for="SearchInputTemplate">{{ 'general.search.search' | t }}</label>
      <input id="SearchInputTemplate" type="search" name="q" value="{{ search.terms | escape }}" placeholder="{{ 'search.placeholder' | t }}">
      <button class="btn btn-primary" type="submit">{{ 'search.submit' | t }}</button>
    </form>

    {% if search.performed %}
      {% if search.results_count == 0 %}
        <div class="card search-empty">
          <p>{{ 'search.no_results_html' | t: terms: search.terms }}</p>
        </div>
      {% else %}
        <p class="section-subheading search-results-count">{{ 'search.results_for_html' | t: terms: search.terms, count: search.results_count }}</p>
        <div class="collection-grid-products">
          {% paginate search.results by 24 %}
            {% for result in search.results %}
              {% if result.object_type == 'product' %}
                {% render 'product-card', product: result %}
              {% else %}
                <article class="card search-article">
                  <h2>{{ result.title | link_to: result.url }}</h2>
                  {% if result.object_type == 'article' %}
                    <p class="section-subheading">{{ result.published_at | date: format: 'abbreviated_date' }}</p>
                  {% endif %}
                  {% if result.excerpt != blank %}
                    <p>{{ result.excerpt | strip_html | truncate: 120 }}</p>
                  {% endif %}
                </article>
              {% endif %}
            {% endfor %}
            <div class="search-pagination">{{ paginate | default_pagination }}</div>
          {% endpaginate %}
        </div>
      {% endif %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Search",
  "settings": []
}
{% endschema %}
