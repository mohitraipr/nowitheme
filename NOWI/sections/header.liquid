<header class="site-header" role="banner">
  <div class="container header-bar">
    <div class="header-left">
      <button class="icon-button mobile-menu-toggle" type="button" aria-label="{{ 'general.menu' | t }}" data-mobile-menu-toggle>
        <span></span>
        <span></span>
        <span></span>
      </button>
      <a class="header-brand" href="{{ routes.root_url }}" aria-label="{{ shop.name | escape }}">
        {% if section.settings.logo != blank %}
          <img src="{{ section.settings.logo | img_url: '200x' }}" alt="{{ section.settings.logo.alt | default: shop.name | escape }}" loading="lazy">
        {% else %}
          <span>{{ shop.name | escape }}</span>
        {% endif %}
      </a>
    </div>

    {% if section.settings.menu != blank %}
      <nav class="header-nav" role="navigation" aria-label="{{ 'layout.navigation.main' | t }}">
        {% for link in linklists[section.settings.menu].links %}
          <a href="{{ link.url }}" class="header-nav__link">{{ link.title | escape }}</a>
        {% endfor %}
      </nav>
    {% endif %}

    <div class="header-actions">
      {% if section.settings.enable_search %}
        <button class="icon-button" type="button" aria-label="{{ 'general.search.search' | t }}" data-search-toggle>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.5"></circle>
            <line x1="16.5" y1="16.5" x2="22" y2="22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line>
          </svg>
        </button>
      {% endif %}

      {% if section.settings.enable_account and shop.customer_accounts_enabled %}
        <a class="icon-button" href="{{ routes.account_url }}" aria-label="{{ 'customer.account.title' | t }}">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 12.5c2.623 0 4.75-2.127 4.75-4.75S14.623 3 12 3 7.25 5.127 7.25 7.75 9.377 12.5 12 12.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M4.53 20.995c.746-3.433 3.678-5.995 7.47-5.995 3.792 0 6.724 2.562 7.47 5.995" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </a>
      {% endif %}

      <a class="icon-button header-cart" href="{{ routes.cart_url }}" aria-label="{{ 'general.cart.view' | t }}" data-cart-toggle>
        <span class="header-cart__icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M3 4h1.5l2.4 11.2a1.5 1.5 0 0 0 1.466 1.2h7.268a1.5 1.5 0 0 0 1.466-1.2L19.5 6H5.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            <circle cx="9" cy="20" r="1" fill="currentColor"></circle>
            <circle cx="17" cy="20" r="1" fill="currentColor"></circle>
          </svg>
        </span>
        <span class="header-cart-count" aria-live="polite" aria-atomic="true">{{ cart.item_count }}</span>
      </a>
    </div>
  </div>

  {% if section.settings.enable_search %}
    <div class="search-panel" data-search-panel data-open="false">
      <div class="search-panel__inner">
        <form action="{{ routes.search_url }}" method="get" role="search" class="search-form">
          <label class="visually-hidden" for="SearchInput">{{ 'general.search.search' | t }}</label>
          <input id="SearchInput" type="search" name="q" placeholder="{{ section.settings.search_placeholder | escape }}" value="{{ search.terms | escape }}">
        </form>
      </div>
    </div>
  {% endif %}

  <div class="mobile-menu" data-mobile-menu aria-hidden="true">
    <div class="mobile-menu__panel">
      <div class="mobile-menu__header">
        <span>{{ 'general.menu' | t }}</span>
        <button class="icon-button" type="button" aria-label="{{ 'general.close' | t }}" data-mobile-menu-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="m6 6 12 12M6 18 18 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
          </svg>
        </button>
      </div>

      {% if section.settings.menu != blank %}
        <nav class="mobile-menu__nav" role="navigation" aria-label="{{ 'layout.navigation.main' | t }}">
          {% for link in linklists[section.settings.menu].links %}
            <a href="{{ link.url }}">{{ link.title | escape }}</a>
          {% endfor %}
        </nav>
      {% endif %}

      {% if section.settings.secondary_menu != blank %}
        <div class="mobile-menu__footer">
          {% for link in linklists[section.settings.secondary_menu].links %}
            <a href="{{ link.url }}" class="mobile-menu__secondary">{{ link.title | escape }}</a>
          {% endfor %}
        </div>
      {% endif %}

      <button class="btn btn-primary" type="button" data-mobile-menu-close>
        {{ section.settings.mobile_cta_label | escape }}
      </button>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Primary navigation"
    },
    {
      "type": "link_list",
      "id": "secondary_menu",
      "label": "Secondary links"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "checkbox",
      "id": "enable_search",
      "label": "Show search",
      "default": true
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "Search placeholder",
      "default": "Search denim, jackets, essentials..."
    },
    {
      "type": "checkbox",
      "id": "enable_account",
      "label": "Show account link",
      "default": true
    },
    {
      "type": "text",
      "id": "mobile_cta_label",
      "label": "Mobile menu CTA label",
      "default": "Shop now"
    }
  ],
  "presets": [
    {
      "name": "Header"
    }
  ]
}
{% endschema %}
