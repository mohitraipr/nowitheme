{% liquid
  assign item = product
  assign on_sale = item.compare_at_price_max > item.price
  assign new_badge = false
  if item.tags contains 'new' or item.tags contains 'New'
    assign new_badge = true
  endif
  assign bestseller_badge = false
  if item.tags contains 'bestseller' or item.tags contains 'Bestseller'
    assign bestseller_badge = true
  endif
%}

<article class="product-card" data-product-card>
  <a href="{{ item.url }}" class="product-card__media">
    {% if new_badge %}
      <span class="badge product-card__badge">{{ 'products.product.new' | t }}</span>
    {% endif %}
    {% if on_sale %}
      <span class="badge product-card__discount">-{{ item.compare_at_price_max | minus: item.price | times: 100 | divided_by: item.compare_at_price_max | round }}%</span>
    {% endif %}
    {% if item.featured_media %}
      {% assign media_alt = item.featured_media.alt | default: item.title | escape %}
      {{ item.featured_media | image_url: width: 800 | image_tag: alt: media_alt, loading: 'lazy' }}
    {% else %}
      {{ 'product-1' | placeholder_svg_tag }}
    {% endif %}
  </a>
  <div class="product-card__content">
    <a href="{{ item.url }}" class="product-card__title">{{ item.title | escape }}</a>
    {% if bestseller_badge %}
      <span class="pill">Bestseller</span>
    {% endif %}
    <div class="product-card__price">
      <span>{{ item.price | money }}</span>
      {% if on_sale %}
        <s>{{ item.compare_at_price_max | money }}</s>
      {% endif %}
    </div>
  </div>
</article>
