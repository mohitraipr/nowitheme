<div class="cart-drawer" data-cart-drawer data-open="false" aria-hidden="true">
  <div class="cart-drawer__panel" role="dialog" aria-modal="true" aria-labelledby="CartDrawerHeading">
    <div class="cart-drawer__header">
      <h2 id="CartDrawerHeading">{{ 'general.cart.title' | t }}</h2>
      <button class="icon-button" type="button" aria-label="{{ 'general.close' | t }}" data-cart-close>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="m6 6 12 12M6 18 18 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
        </svg>
      </button>
    </div>

    <div class="cart-drawer__items">
      {% if cart.item_count > 0 %}
        {% form 'cart', cart %}
          {% for item in cart.items %}
            <div class="cart-line">
              <a href="{{ item.url }}">
                {% if item.image %}
                  {{ item.image | image_url: width: 200 | image_tag: alt: item.product.title, loading: 'lazy' }}
                {% else %}
                  {{ 'product-1' | placeholder_svg_tag }}
                {% endif %}
              </a>
              <div class="cart-line__meta">
                <div>
                  <a href="{{ item.url }}"><strong>{{ item.product.title | escape }}</strong></a>
                  {% if item.variant.title != 'Default Title' %}
                    <div class="cart-line__variant">{{ item.variant.title | escape }}</div>
                  {% endif %}
                </div>
                <div class="quantity">
                  <label class="visually-hidden" for="Quantity-{{ item.key }}">{{ 'cart.general.quantity' | t }}</label>
                  <input id="Quantity-{{ item.key }}" name="updates[{{ item.key }}]" type="number" min="0" value="{{ item.quantity }}">
                  <button type="submit" class="btn btn-outline">{{ 'cart.general.update' | t }}</button>
                </div>
                <div class="cart-line__price">{{ item.final_line_price | money }}</div>
                <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&quantity=0" class="cart-line__remove">{{ 'cart.general.remove' | t }}</a>
              </div>
            </div>
          {% endfor %}
        {% endform %}
      {% else %}
        <p>{{ 'cart.general.empty' | t }}</p>
      {% endif %}
    </div>

    <div class="cart-drawer__footer">
      {% assign shipping_threshold = 9990 %}
      {% assign amount_remaining = shipping_threshold | minus: cart.total_price %}
      {% if amount_remaining > 0 %}
        <p>Add {{ amount_remaining | money }} more for complimentary shipping.</p>
      {% else %}
        <p>Complimentary shipping unlocked.</p>
      {% endif %}
      <div class="cart-drawer__subtotal">
        <span>{{ 'cart.general.subtotal' | t }}</span>
        <strong>{{ cart.total_price | money }}</strong>
      </div>
      <a class="btn btn-primary" href="{{ routes.checkout_url }}">{{ 'cart.general.checkout' | t }}</a>
      <a class="btn btn-outline" href="{{ routes.cart_url }}">{{ 'cart.general.view' | t }}</a>
    </div>
  </div>
</div>
